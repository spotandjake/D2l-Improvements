(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{7314:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(3364)}])},3364:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return e9}});var n,i,r,a,o,c,l,h,d,u,p=s(2322),g=s(2784),f=s(7729),m=s.n(f);(n=c||(c={})).ep="ep",n.le="le",n.lp="lp",n.lr="lr",(i=l||(l={}))[i.Module=0]="Module",i[i.Topic=1]="Topic";var x=class{async _start(){let e=await this.versions();e.forEach(e=>{(e.ProductCode==c.ep||e.ProductCode==c.le||e.ProductCode==c.lp||e.ProductCode==c.lr)&&(this.version[e.ProductCode]=e.LatestVersion)}),this._getToken(!0),setInterval(()=>window.requestIdleCallback(()=>this._getToken(!0),{timeout:1e3}),3e5)}async _fetch(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.startsWith("/")&&(e="https://durham.elearningontario.ca/d2l".concat(e)),t.headers={"content-type":"application/x-www-form-urlencoded, application/json",...t.headers};let s=await fetch(e,t);return s.json()}async _getToken(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(e||""==this.token){let e=await this._fetch("/lp/auth/oauth2/token",{headers:{"x-csrf-token":localStorage.getItem("XSRF.Token")},body:"scope=*:*:*",method:"POST"});this.token=e.access_token}return this.token}async versions(){return await this._fetch("/api/versions/")}constructor(){this.version={ep:"1.0.0",le:"1.0.0",lp:"1.0.0",lr:"1.0.0"},this.cid="",this.token="",this.uid="",this.uid=localStorage.getItem("Session.UserId"),this._start()}},_=s(8541),j=s.n(_);let w=()=>(0,p.jsx)("section",{className:j().container,children:(0,p.jsx)("div",{className:j().loader,children:Array.from({length:9},(e,t)=>(0,p.jsx)("div",{},t))})});var v=s(7747),y=s.n(v),C=s(7220),k=s.n(C),S=s(4351),b=s(9300),N=s(2379),I=s(4882),M=s(3169),A=s(3754),T=s(1495),E=s(1292);(r=h||(h={})).Mail="Mail",r.Message="Message",r.Notification="Alert",r.Profile="Profile",r.Closed="Closed";let D=async e=>JSON.parse((await e.text()).trim().substr(9)),B=e=>{let{brightSpace:t,showAside:s,setSearch:n}=e,[i,r]=(0,g.useState)(3e4),[a,o]=(0,g.useState)("Closed"),[c,l]=(0,g.useState)([]),[h,d]=(0,g.useState)((0,p.jsx)(w,{}));(0,g.useEffect)(()=>{let e;let t=async()=>{let s=await fetch("/d2l/activityFeed/checkForNewAlerts?isXhr=true&requestId=3&X-D2L-Session=no-keep-alive"),n=await D(s);if(Array.isArray(n.Payload)){let e=[];["Messages","Grades"].forEach(t=>{if(n.Payload.includes(t))switch(t){case"Messages":e.push("Mail");break;case"Grades":e.push("Alert");break;default:alert("Unknown Notification Type ".concat(t))}}),l(e)}else l([]);e=setTimeout(t,i)};return t(),()=>clearTimeout(e)},[]);let u=async e=>{if(a===e||"Closed"==e)o("Closed"),d((0,p.jsx)(w,{}));else{o(e);let s=["","Alert","Mail"].indexOf(e);if(-1!=s){let e=await fetch("/d2l/MiniBar/".concat(t.cid,"/ActivityFeed/GetAlertsDaylight?Category=").concat(s,"&requestId=3")),n=await D(e),i=new DOMParser,r=i.parseFromString(n.Payload.Html,"text/html");d((0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("h2",{children:a}),(0,p.jsx)("hr",{}),(0,p.jsx)("div",{children:(0,p.jsx)("div",{className:k().NotificationShade,dangerouslySetInnerHTML:{__html:r.querySelector(".vui-list").innerHTML}})})]}))}else"Profile"==e?d((0,p.jsxs)("ul",{className:k().dropDown,children:[(0,p.jsx)("li",{children:(0,p.jsx)("button",{onClick:()=>{localStorage.setItem("Extension-Disabled","true"),location.reload()},children:"Disable Extension"})}),(0,p.jsx)("li",{children:(0,p.jsx)("button",{children:"Profile"})}),(0,p.jsx)("li",{children:(0,p.jsx)("button",{children:"Settings"})}),(0,p.jsx)("li",{children:(0,p.jsx)("a",{href:"https://durham.elearningontario.ca/d2l/logout",children:"Log Out"})})]})):d((0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("h2",{children:a}),(0,p.jsx)("hr",{}),(0,p.jsx)("div",{children:(0,p.jsx)(w,{})})]}))}};return(0,p.jsxs)("nav",{className:k().container,children:[(0,p.jsx)(S.Z,{timeout:3e4,onActive:()=>r(3e4),onIdle:()=>r(3e5),debounce:250}),(0,p.jsx)("div",{className:"".concat(k().side," ").concat(k().leftSide),children:(0,p.jsx)(b.Z,{"aria-label":"aside",className:k().IconButton,onClick:()=>{void 0!=s&&setTimeout(()=>s(e=>!e),100)},children:(0,p.jsx)(N.Z,{className:k().Icon,component:I.Z,viewBox:"0 0 24 24"})})}),(0,p.jsx)("div",{className:k().center,children:(0,p.jsx)("input",{className:k().SearchBar,placeholder:"Search",type:"text",onChange:e=>{void 0!=n&&n(()=>e.target.value)}})}),(0,p.jsx)(E.Z,{onClickAway:()=>u("Closed"),children:(0,p.jsxs)("div",{className:"".concat(k().side," ").concat(k().rightSide),children:[(0,p.jsx)(b.Z,{"aria-label":"Mail",className:[k().IconButton,c.includes("Mail")?k().Active:""].join(" "),onClick:()=>u("Mail"),children:(0,p.jsx)(N.Z,{className:k().Icon,component:M.Z,viewBox:"0 0 24 24"})}),(0,p.jsx)(b.Z,{"aria-label":"Message",className:[k().IconButton,c.includes("Message")?k().Active:""].join(" "),onClick:()=>u("Message"),children:(0,p.jsx)(N.Z,{className:k().Icon,component:A.Z,viewBox:"0 0 24 24"})}),(0,p.jsx)(b.Z,{"aria-label":"Alerts",className:[k().IconButton,c.includes("Alert")?k().Active:""].join(" "),onClick:()=>u("Alert"),children:(0,p.jsx)(N.Z,{className:k().Icon,component:T.Z,viewBox:"0 0 24 24"})}),(0,p.jsx)(b.Z,{"aria-label":"Profile",className:k().IconButton,onClick:()=>u("Profile"),children:(0,p.jsx)("picture",{className:k().Icon,children:(0,p.jsx)("img",{src:"https://durham.elearningontario.ca/d2l/api/lp/1.32/profile/myProfile/image"})})}),(0,p.jsx)("div",{className:[k().alertArea,"Closed"==a?"":k().open].join(" "),children:h})]})})]})};var P=s(6447),R=s.n(P);let L=e=>{let{Title:t,Href:s,Active:n,children:i,Route:r}=e,a=(e,t,s)=>{s&&(r?(history.pushState({Title:e,Url:t},e,t),r()):window.location.href=t)};return(0,p.jsx)("div",{onClick:()=>{a(t,s,n)},children:i})},z=e=>{let{Name:t,Active:s,Href:n,Picture:i,StartDate:r,Route:a}=e;return(0,p.jsx)("div",{className:[R().container,s?R().disabled:" "].join(" "),children:(0,p.jsxs)(L,{Title:t,Href:n,Active:!s,Route:a,children:[(0,p.jsx)("picture",{children:(0,p.jsx)("img",{src:i})}),(0,p.jsxs)("div",{className:R().content,children:[(0,p.jsx)("h4",{children:t}),s?(0,p.jsx)("h6",{children:"Closed"}):(0,p.jsxs)("h6",{children:["Closes | ",new Date(r).toDateString()]})]})]})})},F=e=>{let{brightSpace:t,Route:s}=e,[n,i]=(0,g.useState)((0,p.jsx)(p.Fragment,{}));return(0,g.useEffect)(()=>{(async()=>{let e=new Date().valueOf(),n=await t._fetch("https://bc59e98c-eabc-4d42-98e1-edfe93518966.enrollments.api.brightspace.com/users/".concat(t.uid,"?search=&pageSize=20&embedDepth=0&sort=current&parentOrganizations=&orgUnitTypeId=3&promotePins=true&autoPinCourses=false&roles=&excludeEnded=false&excludeIndirect=false"),{headers:{authorization:"Bearer ".concat(await t._getToken())}}),r=await Promise.all(n.entities.map(async n=>{let{href:i}=n,r=await t._fetch(i,{headers:{authorization:"Bearer ".concat(await t._getToken())}}),a=await t._fetch(r.links[1].href,{headers:{authorization:"Bearer ".concat(await t._getToken())}}),o=await window.fetch(a.entities[2].href).then(e=>e.json()).catch(async()=>await t._fetch(a.entities[2].href,{headers:{authorization:"Bearer ".concat(await t._getToken())}}).catch(()=>"https://blog.fluidui.com/content/images/2019/01/imageedit_1_9273372713.png")),{endDate:c,name:l,startDate:h}=a.properties;return(0,p.jsx)(z,{Name:l,Active:new Date(c).valueOf()<e,Href:a.links[0].href.replace("https://bc59e98c-eabc-4d42-98e1-edfe93518966.folio.api.brightspace.com/organizations/","https://durham.elearningontario.ca/d2l/home/"),Picture:o.links?o.links[2].href:o,StartDate:h,Route:()=>s(t)})}));i((0,p.jsx)(p.Fragment,{children:r}))})()},[]),(0,p.jsxs)("section",{className:y().container,children:[(0,p.jsx)(B,{brightSpace:t}),(0,p.jsx)("section",{className:y().list,children:n})]})};var O=(0,g.memo)(F),$=s(2032),Z=s.n($);function H(e){return Array.isArray?Array.isArray(e):"[object Array]"===K(e)}(a=d||(d={})).News="News",a.Content="Content",a.Discussions="Discussions",a.Assignments="Assignments",a.Quizzes="Quizzes",(o=u||(u={})).Complete="Complete",o.Unread="Unread",o.OverDue="DueDate";let U=1/0;function W(e){return"string"==typeof e}function Q(e){return"number"==typeof e}function q(e){return"object"==typeof e}function V(e){return null!=e}function X(e){return!e.trim().length}function K(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}let G=e=>"Invalid value for key ".concat(e),J=e=>"Pattern length exceeds max of ".concat(e,"."),Y=e=>"Missing ".concat(e," property in key"),ee=e=>"Property 'weight' in key '".concat(e,"' must be a positive integer"),et=Object.prototype.hasOwnProperty;class es{get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}constructor(e){this._keys=[],this._keyMap={};let t=0;e.forEach(e=>{let s=en(e);t+=s.weight,this._keys.push(s),this._keyMap[s.id]=s,t+=s.weight}),this._keys.forEach(e=>{e.weight/=t})}}function en(e){let t=null,s=null,n=null,i=1,r=null;if(W(e)||H(e))n=e,t=ei(e),s=er(e);else{if(!et.call(e,"name"))throw Error(Y("name"));let a=e.name;if(n=a,et.call(e,"weight")&&(i=e.weight)<=0)throw Error(ee(a));t=ei(a),s=er(a),r=e.getFn}return{path:t,id:s,weight:i,src:n,getFn:r}}function ei(e){return H(e)?e:e.split(".")}function er(e){return H(e)?e.join("."):e}var ea={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1,includeMatches:!1,findAllMatches:!1,minMatchCharLength:1,location:0,threshold:.6,distance:100,useExtendedSearch:!1,getFn:function(e,t){let s=[],n=!1,i=(e,t,r)=>{if(V(e)){if(t[r]){var a,o;let c=t[r],l=e[c];if(V(l)){if(r===t.length-1&&(W(l)||Q(l)||!0===(a=l)||!1===a||q(o=a)&&null!==o&&"[object Boolean]"==K(a)))s.push(null==l?"":function(e){if("string"==typeof e)return e;let t=e+"";return"0"==t&&1/e==-U?"-0":t}(l));else if(H(l)){n=!0;for(let e=0,s=l.length;e<s;e+=1)i(l[e],t,r+1)}else t.length&&i(l,t,r+1)}}else s.push(e)}};return i(e,W(t)?t.split("."):t,0),n?s:s[0]},ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};let eo=/[^ ]+/g;class ec{setSources(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.docs=e}setIndexRecords(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.records=e}setKeys(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.keys=e,this._keysMap={},e.forEach((e,t)=>{this._keysMap[e.id]=t})}create(){!this.isCreated&&this.docs.length&&(this.isCreated=!0,W(this.docs[0])?this.docs.forEach((e,t)=>{this._addString(e,t)}):this.docs.forEach((e,t)=>{this._addObject(e,t)}),this.norm.clear())}add(e){let t=this.size();W(e)?this._addString(e,t):this._addObject(e,t)}removeAt(e){this.records.splice(e,1);for(let t=e,s=this.size();t<s;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(e,t){return e[this._keysMap[t]]}size(){return this.records.length}_addString(e,t){if(!V(e)||X(e))return;let s={v:e,i:t,n:this.norm.get(e)};this.records.push(s)}_addObject(e,t){let s={i:t,$:{}};this.keys.forEach((t,n)=>{let i=t.getFn?t.getFn(e):this.getFn(e,t.path);if(V(i)){if(H(i)){let e=[],t=[{nestedArrIndex:-1,value:i}];for(;t.length;){let{nestedArrIndex:s,value:n}=t.pop();if(V(n)){if(W(n)&&!X(n)){let t={v:n,i:s,n:this.norm.get(n)};e.push(t)}else H(n)&&n.forEach((e,s)=>{t.push({nestedArrIndex:s,value:e})})}}s.$[n]=e}else if(W(i)&&!X(i)){let e={v:i,n:this.norm.get(i)};s.$[n]=e}}}),this.records.push(s)}toJSON(){return{keys:this.keys,records:this.records}}constructor({getFn:e=ea.getFn,fieldNormWeight:t=ea.fieldNormWeight}={}){this.norm=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,s=new Map,n=Math.pow(10,t);return{get(t){let i=t.match(eo).length;if(s.has(i))return s.get(i);let r=parseFloat(Math.round(1/Math.pow(i,.5*e)*n)/n);return s.set(i,r),r},clear(){s.clear()}}}(t,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}}function el(e,t){let{getFn:s=ea.getFn,fieldNormWeight:n=ea.fieldNormWeight}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=new ec({getFn:s,fieldNormWeight:n});return i.setKeys(e.map(en)),i.setSources(t),i.create(),i}function eh(e){let{errors:t=0,currentLocation:s=0,expectedLocation:n=0,distance:i=ea.distance,ignoreLocation:r=ea.ignoreLocation}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t/e.length;if(r)return a;let o=Math.abs(n-s);return i?a+o/i:o?1:a}class ed{searchIn(e){let{isCaseSensitive:t,includeMatches:s}=this.options;if(t||(e=e.toLowerCase()),this.pattern===e){let t={isMatch:!0,score:0};return s&&(t.indices=[[0,e.length-1]]),t}let{location:n,distance:i,threshold:r,findAllMatches:a,minMatchCharLength:o,ignoreLocation:c}=this.options,l=[],h=0,d=!1;this.chunks.forEach(t=>{let{pattern:u,alphabet:p,startIndex:g}=t,{isMatch:f,score:m,indices:x}=function(e,t,s){let n,{location:i=ea.location,distance:r=ea.distance,threshold:a=ea.threshold,findAllMatches:o=ea.findAllMatches,minMatchCharLength:c=ea.minMatchCharLength,includeMatches:l=ea.includeMatches,ignoreLocation:h=ea.ignoreLocation}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(t.length>32)throw Error(J(32));let d=t.length,u=e.length,p=Math.max(0,Math.min(i,u)),g=a,f=p,m=c>1||l,x=m?Array(u):[];for(;(n=e.indexOf(t,f))>-1;)if(g=Math.min(eh(t,{currentLocation:n,expectedLocation:p,distance:r,ignoreLocation:h}),g),f=n+d,m){let e=0;for(;e<d;)x[n+e]=1,e+=1}f=-1;let _=[],j=1,w=d+u,v=1<<d-1;for(let n=0;n<d;n+=1){let i=0,a=w;for(;i<a;){let e=eh(t,{errors:n,currentLocation:p+a,expectedLocation:p,distance:r,ignoreLocation:h});e<=g?i=a:w=a,a=Math.floor((w-i)/2+i)}w=a;let c=Math.max(1,p-a+1),l=o?u:Math.min(p+a,u)+d,y=Array(l+2);y[l+1]=(1<<n)-1;for(let i=l;i>=c;i-=1){let a=i-1,o=s[e.charAt(a)];if(m&&(x[a]=+!!o),y[i]=(y[i+1]<<1|1)&o,n&&(y[i]|=(_[i+1]|_[i])<<1|1|_[i+1]),y[i]&v&&(j=eh(t,{errors:n,currentLocation:a,expectedLocation:p,distance:r,ignoreLocation:h}))<=g){if(g=j,(f=a)<=p)break;c=Math.max(1,2*p-f)}}let C=eh(t,{errors:n+1,currentLocation:p,expectedLocation:p,distance:r,ignoreLocation:h});if(C>g)break;_=y}let y={isMatch:f>=0,score:Math.max(.001,j)};if(m){let e=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ea.minMatchCharLength,s=[],n=-1,i=-1,r=0;for(let a=e.length;r<a;r+=1){let a=e[r];a&&-1===n?n=r:a||-1===n||((i=r-1)-n+1>=t&&s.push([n,i]),n=-1)}return e[r-1]&&r-n>=t&&s.push([n,r-1]),s}(x,c);e.length?l&&(y.indices=e):y.isMatch=!1}return y}(e,u,p,{location:n+g,distance:i,threshold:r,findAllMatches:a,minMatchCharLength:o,includeMatches:s,ignoreLocation:c});f&&(d=!0),h+=m,f&&x&&(l=[...l,...x])});let u={isMatch:d,score:d?h/this.chunks.length:1};return d&&s&&(u.indices=l),u}constructor(e,{location:t=ea.location,threshold:s=ea.threshold,distance:n=ea.distance,includeMatches:i=ea.includeMatches,findAllMatches:r=ea.findAllMatches,minMatchCharLength:a=ea.minMatchCharLength,isCaseSensitive:o=ea.isCaseSensitive,ignoreLocation:c=ea.ignoreLocation}={}){if(this.options={location:t,threshold:s,distance:n,includeMatches:i,findAllMatches:r,minMatchCharLength:a,isCaseSensitive:o,ignoreLocation:c},this.pattern=o?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;let l=(e,t)=>{this.chunks.push({pattern:e,alphabet:function(e){let t={};for(let s=0,n=e.length;s<n;s+=1){let i=e.charAt(s);t[i]=(t[i]||0)|1<<n-s-1}return t}(e),startIndex:t})},h=this.pattern.length;if(h>32){let e=0,t=h%32,s=h-t;for(;e<s;)l(this.pattern.substr(e,32),e),e+=32;if(t){let e=h-32;l(this.pattern.substr(e),e)}}else l(this.pattern,0)}}class eu{static isMultiMatch(e){return ep(e,this.multiRegex)}static isSingleMatch(e){return ep(e,this.singleRegex)}search(){}constructor(e){this.pattern=e}}function ep(e,t){let s=e.match(t);return s?s[1]:null}class eg extends eu{static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}constructor(e,{location:t=ea.location,threshold:s=ea.threshold,distance:n=ea.distance,includeMatches:i=ea.includeMatches,findAllMatches:r=ea.findAllMatches,minMatchCharLength:a=ea.minMatchCharLength,isCaseSensitive:o=ea.isCaseSensitive,ignoreLocation:c=ea.ignoreLocation}={}){super(e),this._bitapSearch=new ed(e,{location:t,threshold:s,distance:n,includeMatches:i,findAllMatches:r,minMatchCharLength:a,isCaseSensitive:o,ignoreLocation:c})}}class ef extends eu{static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let t,s=0,n=[],i=this.pattern.length;for(;(t=e.indexOf(this.pattern,s))>-1;)s=t+i,n.push([t,s-1]);let r=!!n.length;return{isMatch:r,score:r?0:1,indices:n}}constructor(e){super(e)}}let em=[class extends eu{static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){let t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}constructor(e){super(e)}},ef,class extends eu{static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){let t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}constructor(e){super(e)}},class extends eu{static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){let t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}constructor(e){super(e)}},class extends eu{static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){let t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}constructor(e){super(e)}},class extends eu{static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){let t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}constructor(e){super(e)}},class extends eu{static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){let t=e.indexOf(this.pattern),s=-1===t;return{isMatch:s,score:s?0:1,indices:[0,e.length-1]}}constructor(e){super(e)}},eg],ex=em.length,e_=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,ej=new Set([eg.type,ef.type]),ew=[];function ev(e,t){for(let s=0,n=ew.length;s<n;s+=1){let n=ew[s];if(n.condition(e,t))return new n(e,t)}return new ed(e,t)}let ey={AND:"$and",OR:"$or"},eC={PATH:"$path",PATTERN:"$val"},ek=e=>!!(e[ey.AND]||e[ey.OR]),eS=e=>!!e[eC.PATH],eb=e=>!H(e)&&q(e)&&!ek(e),eN=e=>({[ey.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function eI(e,t){let{auto:s=!0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=e=>{let i=Object.keys(e),r=eS(e);if(!r&&i.length>1&&!ek(e))return n(eN(e));if(eb(e)){let n=r?e[eC.PATH]:i[0],a=r?e[eC.PATTERN]:e[n];if(!W(a))throw Error(G(n));let o={keyId:er(n),pattern:a};return s&&(o.searcher=ev(a,t)),o}let a={children:[],operator:i[0]};return i.forEach(t=>{let s=e[t];H(s)&&s.forEach(e=>{a.children.push(n(e))})}),a};return ek(e)||(e=eN(e)),n(e)}function eM(e,t){let s=e.matches;t.matches=[],V(s)&&s.forEach(e=>{if(!V(e.indices)||!e.indices.length)return;let{indices:s,value:n}=e,i={indices:s,value:n};e.key&&(i.key=e.key.src),e.idx>-1&&(i.refIndex=e.idx),t.matches.push(i)})}function eA(e,t){t.score=e.score}class eT{setCollection(e,t){if(this._docs=e,t&&!(t instanceof ec))throw Error("Incorrect 'index' type");this._myIndex=t||el(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){V(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>!1,t=[];for(let s=0,n=this._docs.length;s<n;s+=1){let i=this._docs[s];e(i,s)&&(this.removeAt(s),s-=1,n-=1,t.push(i))}return t}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e){let{limit:t=-1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{includeMatches:s,includeScore:n,shouldSort:i,sortFn:r,ignoreFieldNorm:a}=this.options,o=W(e)?W(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return!function(e,t){let{ignoreFieldNorm:s=ea.ignoreFieldNorm}=t;e.forEach(e=>{let t=1;e.matches.forEach(e=>{let{key:n,norm:i,score:r}=e,a=n?n.weight:null;t*=Math.pow(0===r&&a?Number.EPSILON:r,(a||1)*(s?1:i))}),e.score=t})}(o,{ignoreFieldNorm:a}),i&&o.sort(r),Q(t)&&t>-1&&(o=o.slice(0,t)),function(e,t){let{includeMatches:s=ea.includeMatches,includeScore:n=ea.includeScore}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=[];return s&&i.push(eM),n&&i.push(eA),e.map(e=>{let{idx:s}=e,n={item:t[s],refIndex:s};return i.length&&i.forEach(t=>{t(e,n)}),n})}(o,this._docs,{includeMatches:s,includeScore:n})}_searchStringList(e){let t=ev(e,this.options),{records:s}=this._myIndex,n=[];return s.forEach(e=>{let{v:s,i:i,n:r}=e;if(!V(s))return;let{isMatch:a,score:o,indices:c}=t.searchIn(s);a&&n.push({item:s,idx:i,matches:[{score:o,value:s,norm:r,indices:c}]})}),n}_searchLogical(e){let t=eI(e,this.options),s=(e,t,n)=>{if(!e.children){let{keyId:s,searcher:i}=e,r=this._findMatches({key:this._keyStore.get(s),value:this._myIndex.getValueForItemAtKeyId(t,s),searcher:i});return r&&r.length?[{idx:n,item:t,matches:r}]:[]}let i=[];for(let r=0,a=e.children.length;r<a;r+=1){let a=e.children[r],o=s(a,t,n);if(o.length)i.push(...o);else if(e.operator===ey.AND)return[]}return i},n=this._myIndex.records,i={},r=[];return n.forEach(e=>{let{$:n,i:a}=e;if(V(n)){let e=s(t,n,a);e.length&&(i[a]||(i[a]={idx:a,item:n,matches:[]},r.push(i[a])),e.forEach(e=>{let{matches:t}=e;i[a].matches.push(...t)}))}}),r}_searchObjectList(e){let t=ev(e,this.options),{keys:s,records:n}=this._myIndex,i=[];return n.forEach(e=>{let{$:n,i:r}=e;if(!V(n))return;let a=[];s.forEach((e,s)=>{a.push(...this._findMatches({key:e,value:n[s],searcher:t}))}),a.length&&i.push({idx:r,item:n,matches:a})}),i}_findMatches(e){let{key:t,value:s,searcher:n}=e;if(!V(s))return[];let i=[];if(H(s))s.forEach(e=>{let{v:s,i:r,n:a}=e;if(!V(s))return;let{isMatch:o,score:c,indices:l}=n.searchIn(s);o&&i.push({score:c,key:t,value:s,idx:r,norm:a,indices:l})});else{let{v:e,n:r}=s,{isMatch:a,score:o,indices:c}=n.searchIn(e);a&&i.push({score:o,key:t,value:e,norm:r,indices:c})}return i}constructor(e,t={},s){this.options={...ea,...t},this.options.useExtendedSearch,this._keyStore=new es(this.options.keys),this.setCollection(e,s)}}eT.version="6.6.2",eT.createIndex=el,eT.parseIndex=function(e){let{getFn:t=ea.getFn,fieldNormWeight:s=ea.fieldNormWeight}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{keys:n,records:i}=e,r=new ec({getFn:t,fieldNormWeight:s});return r.setKeys(n),r.setIndexRecords(i),r},eT.config=ea,eT.parseQuery=eI,function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];ew.push(...t)}(class{static condition(e,t){return t.useExtendedSearch}searchIn(e){let t=this.query;if(!t)return{isMatch:!1,score:1};let{includeMatches:s,isCaseSensitive:n}=this.options;e=n?e:e.toLowerCase();let i=0,r=[],a=0;for(let n=0,o=t.length;n<o;n+=1){let o=t[n];r.length=0,i=0;for(let t=0,n=o.length;t<n;t+=1){let n=o[t],{isMatch:c,indices:l,score:h}=n.search(e);if(c){if(i+=1,a+=h,s){let e=n.constructor.type;ej.has(e)?r=[...r,...l]:r.push(l)}}else{a=0,i=0,r.length=0;break}}if(i){let e={isMatch:!0,score:a/i};return s&&(e.indices=r),e}}return{isMatch:!1,score:1}}constructor(e,{isCaseSensitive:t=ea.isCaseSensitive,includeMatches:s=ea.includeMatches,minMatchCharLength:n=ea.minMatchCharLength,ignoreLocation:i=ea.ignoreLocation,findAllMatches:r=ea.findAllMatches,location:a=ea.location,threshold:o=ea.threshold,distance:c=ea.distance}={}){this.query=null,this.options={isCaseSensitive:t,includeMatches:s,minMatchCharLength:n,findAllMatches:r,ignoreLocation:i,location:a,threshold:o,distance:c},this.pattern=t?e:e.toLowerCase(),this.query=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.split("|").map(e=>{let s=e.trim().split(e_).filter(e=>e&&!!e.trim()),n=[];for(let e=0,i=s.length;e<i;e+=1){let i=s[e],r=!1,a=-1;for(;!r&&++a<ex;){let e=em[a],s=e.isMultiMatch(i);s&&(n.push(new e(s,t)),r=!0)}if(!r)for(a=-1;++a<ex;){let e=em[a],s=e.isSingleMatch(i);if(s){n.push(new e(s,t));break}}}return n})}(this.pattern,this.options)}});var eE=s(4379),eD=s.n(eE);let eB=e=>{let{Name:t,Picture:s,StartDate:n}=e;return(0,p.jsxs)("header",{className:eD().container,children:[(0,p.jsx)("picture",{children:(0,p.jsx)("img",{src:s})}),(0,p.jsxs)("div",{className:eD().content,children:[(0,p.jsx)("h4",{children:t}),(0,p.jsxs)("h6",{children:["Closes | ",new Date(n).toDateString()]})]})]})};var eP=s(9753),eR=s.n(eP),eL=s(9213),ez=s(3699),eF=s(8484),eO=s.n(eF);let e$=e=>{let{Content:t}=e;return console.log(t),(0,p.jsx)("div",{className:eO().markDown,dangerouslySetInnerHTML:{__html:t.Html||t.Text}})};var eZ=s(375),eH=s.n(eZ),eU=s(2702);let eW=async(e,t)=>{let s=await fetch(e),n=await s.blob(),i=new FormData;i.append("file",n,"file.out");let r=await fetch(t,{method:"POST",cache:"no-cache",body:i}),a=await r.json();return a},eQ=e=>{let{Content:t}=e,[s,n]=(0,g.useState)((0,p.jsx)(w,{}));return(0,g.useEffect)(()=>{switch(!0){case/docs\.google\.com/i.test(t):n((0,p.jsx)("iframe",{allow:"encrypted-media *;",width:"100%",scrolling:"no",src:t,children:"The File Is Having Issues Being Shown"}));break;case/www\.youtube\.com/i.test(t):n((0,p.jsx)("object",{data:"https://www.youtube.com/embed/".concat(new URL(t).searchParams.get("v")),type:"application/pdf",width:"100%",height:"auto",children:(0,p.jsx)("embed",{src:"https://www.youtube.com/embed/".concat(new URL(t).searchParams.get("v")),type:"application/pdf"})}));break;case/\.(doc|docm|docm|docx|docx|dotx|potx|ppt|pptm|pptm|pptx|xlw|xls|xlsm|xlsm|xlsx|xltx)/i.test(t):(async()=>{let e=await eW(t,"https://filecache.spotandjake.repl.co/save");if("Ok"==e.status){let s=t.split(".").pop(),i="https://filecache.spotandjake.repl.co/load/".concat(e.id,".").concat(s);n((0,p.jsx)(eU.ZP,{documents:[{uri:i}],pluginRenderers:eU.lX}))}else console.log("err loading")})();break;case/\.(apng|avif|gif|jpg|jpeg|jfif|pjpeg|pjp|png|svg|webp)/i.test(t):n((0,p.jsx)("picture",{className:eH().contentMedia,children:(0,p.jsx)("img",{src:t})}));break;case/\.(3gp|aac|flac|mpg|mpeg|mp3|mp4|m4a|m4v|m4p|oga|ogg|ogv|ogg|mov|wav|webm)/i.test(t):n((0,p.jsxs)("video",{className:eH().contentMedia,controls:!0,children:[(0,p.jsx)("source",{src:t}),"Your Browser Does Not Support The Video Type"]}));break;case/\.(pdf)/i.test(t):n((0,p.jsx)("object",{data:t,type:"application/pdf",width:"100%",height:"auto",children:(0,p.jsx)("embed",{src:t,type:"application/pdf"})}));break;case t.startsWith("/")&&/\.(html|htm)/i.test(t):n((0,p.jsx)("iframe",{allow:"encrypted-media *;",width:"100%",src:t,children:"The Page is having some trouble showing"}));break;default:console.log("rendering is not yet implemented for content at url: ".concat(t))}},[]),s},eq=e=>{let{Content:t}=e;return(0,p.jsx)("div",{className:eH().container,children:(0,p.jsx)(eQ,{Content:t})})},eV=(e,t)=>{switch(e){case d.News:return(0,p.jsx)(e$,{Content:t});case d.Content:return(0,p.jsx)(eq,{Content:t});default:return console.log("Implement Viewing for Category: ".concat(e)),console.log(t),(0,p.jsx)(w,{})}},eX=e=>{let{Id:t,Title:s,Progress:n,Category:i,StartDate:r,Content:a}=e,[o,c]=(0,g.useState)((0,p.jsx)(w,{})),[l,h]=(0,g.useState)(!1),u=()=>{l||(c(eV(i,a)),h(!0))},f={[d.News]:eL.Z,[d.Content]:ez.Z}[i];return(0,p.jsxs)("label",{className:[eR().container,eR()[i]].join(" "),htmlFor:"".concat(t,"-ExpandState"),onClick:()=>u(),children:[(0,p.jsxs)("div",{className:eR().titleBlock,children:[(0,p.jsx)("div",{className:[eR().titleIcon,n].join(" "),children:(0,p.jsx)(N.Z,{className:eR().Icon,component:f,viewBox:"0 0 24 24"})}),(0,p.jsxs)("div",{className:eR().titleText,children:[(0,p.jsx)("h2",{children:s}),(0,p.jsx)("h5",{children:new Date(r).toDateString()})]})]}),(0,p.jsx)("input",{type:"checkbox",id:"".concat(t,"-ExpandState")}),(0,p.jsxs)("div",{className:eR().expandContainer,children:[(0,p.jsx)("hr",{}),o]})]})};var eK=s(7480),eG=s.n(eK);let eJ=e=>{let{Type:t}=e;return(0,p.jsx)("label",{className:[eG().container,eG()[t]].join(" "),htmlFor:"".concat(t,"-ExpandState"),children:t})};var eY=s(8831),e0=s.n(eY);let e1=e=>{let{brightSpace:t,Route:s,Active:n,showAside:i}=e,[r,a]=(0,g.useState)((0,p.jsx)(p.Fragment,{}));return(0,g.useEffect)(()=>{(async()=>{let e=new Date().valueOf(),n=await t._fetch("https://bc59e98c-eabc-4d42-98e1-edfe93518966.enrollments.api.brightspace.com/users/".concat(t.uid,"?search=&pageSize=20&embedDepth=0&sort=current&parentOrganizations=&orgUnitTypeId=3&promotePins=true&autoPinCourses=false&roles=&excludeEnded=false&excludeIndirect=false"),{headers:{authorization:"Bearer ".concat(await t._getToken())}}),i=await Promise.all(n.entities.map(async n=>{let{href:i}=n,r=await t._fetch(i,{headers:{authorization:"Bearer ".concat(await t._getToken())}}),a=await t._fetch(r.links[1].href,{headers:{authorization:"Bearer ".concat(await t._getToken())}}),{endDate:o,name:c}=a.properties;return new Date(o).valueOf()<e?(0,p.jsx)(p.Fragment,{}):(0,p.jsx)("li",{children:(0,p.jsx)(L,{Title:c,Href:a.links[0].href.replace("https://bc59e98c-eabc-4d42-98e1-edfe93518966.folio.api.brightspace.com/organizations/","https://durham.elearningontario.ca/d2l/home/"),Active:!0,Route:()=>s(t),children:(0,p.jsx)("h3",{children:c})})})}));a((0,p.jsx)("ul",{children:i}))})()},[]),(0,p.jsx)("aside",{className:[e0().container,n?e0().Active:""].join(" "),children:(0,p.jsx)(E.Z,{onClickAway:()=>i(()=>!1),children:r})})};var e2=(0,g.memo)(e1);let e3=e=>{let{brightSpace:t,Route:s,ClassId:n}=e,[i,r]=(0,g.useState)(3e4),[a,o]=(0,g.useState)(void 0),[c,h]=(0,g.useState)((0,p.jsx)(w,{})),[f,m]=(0,g.useState)(!1),[x,_]=(0,g.useState)("");return(0,g.useEffect)(()=>{let e;let r=async()=>{let a=[],c=await t._fetch("/api/le/".concat(t.version.le,"/").concat(n,"/news/"));c.forEach(e=>{a.push({date:new Date(e.StartDate).getTime(),title:e.Title,body:e.Body.Text||"",elm:(0,p.jsx)(eX,{Id:e.Id,Title:e.Title,Progress:u.Complete,Category:d.News,StartDate:e.StartDate,Content:e.Body,Route:s},e.Id)})});let h=await t._fetch("/api/le/unstable/".concat(n,"/content/userprogress/?pageSize=99999")),g=async e=>{let s=[];return await Promise.all(e.map(async e=>{switch(e.Type){case l.Module:{let i=await t._fetch("/api/le/".concat(t.version.le,"/").concat(n,"/content/modules/").concat(e.Id,"/structure/"));s.push(...await g(i));break}case l.Topic:s.push({...e,Read:h.Objects.some(t=>t.ObjectId==e.Id&&t.IsRead)})}})),s},f=await t._fetch("/api/le/".concat(t.version.le,"/").concat(n,"/content/root/")),m=await g(f);for(let e of m)a.push({title:e.Title,body:"",date:new Date(e.LastModifiedDate).getTime(),elm:(0,p.jsx)(eX,{Id:e.Id,Title:e.Title,Progress:[u.Unread,u.Complete][e.Read?1:0],Category:d.Content,StartDate:e.LastModifiedDate,Content:e.Url,Route:s},e.Id)});o(a.sort((e,t)=>t.date-e.date)),e=setTimeout(r,i)};return(async()=>{let{properties:e,entities:s}=await t._fetch("https://bc59e98c-eabc-4d42-98e1-edfe93518966.organizations.api.brightspace.com/".concat(n),{headers:{authorization:"Bearer ".concat(await t._getToken())}}),i=await window.fetch(s[2].href).then(e=>e.json()).catch(async()=>await t._fetch(s[2].href,{headers:{authorization:"Bearer ".concat(await t._getToken())}}).catch(()=>"https://blog.fluidui.com/content/images/2019/01/imageedit_1_9273372713.png"));h((0,p.jsx)(eB,{Name:e.name,Picture:i.links?i.links[2].href:i,StartDate:e.startDate})),r()})(),()=>clearTimeout(e)},[n]),(0,p.jsxs)("section",{className:Z().container,children:[(0,p.jsx)(S.Z,{timeout:3e4,onActive:()=>r(3e4),onIdle:()=>r(9e5),debounce:250}),(0,p.jsx)(B,{brightSpace:t,showAside:m,setSearch:_}),(0,p.jsx)(e2,{brightSpace:t,Route:s,Active:f,showAside:m}),(0,p.jsxs)("section",{className:Z().content,children:[c,(0,p.jsxs)("section",{className:Z().stream,children:[(0,p.jsx)("input",{type:"checkbox",id:"".concat(d.News,"-ExpandState"),defaultChecked:!0}),(0,p.jsx)("input",{type:"checkbox",id:"".concat(d.Content,"-ExpandState"),defaultChecked:!0}),(0,p.jsx)("input",{type:"checkbox",id:"".concat(d.Discussions,"-ExpandState"),defaultChecked:!0}),(0,p.jsx)("input",{type:"checkbox",id:"".concat(d.Assignments,"-ExpandState"),defaultChecked:!0}),(0,p.jsx)("input",{type:"checkbox",id:"".concat(d.Quizzes,"-ExpandState"),defaultChecked:!0}),(0,p.jsxs)("div",{className:Z().chipContainer,children:[(0,p.jsx)(eJ,{Type:d.News}),(0,p.jsx)(eJ,{Type:d.Content}),(0,p.jsx)(eJ,{Type:d.Discussions}),(0,p.jsx)(eJ,{Type:d.Assignments}),(0,p.jsx)(eJ,{Type:d.Quizzes})]}),(()=>{if(void 0==a)return(0,p.jsx)(w,{});if(""==x)return(0,p.jsx)(p.Fragment,{children:a.map(e=>e.elm)});{let e=new eT(a,{includeScore:!0,findAllMatches:!0,shouldSort:!0,useExtendedSearch:!0,keys:["title","body"]}),t=e.search(x);return(0,p.jsx)(p.Fragment,{children:t.map(e=>e.item.elm)})}})()]})]})]})},e4=()=>{let[e,t]=(0,g.useState)((0,p.jsx)(w,{})),[s,n]=(0,g.useState)("Homepage - ClassList"),i=e=>{let s=window.location.pathname;if(!0===/\/d2l\/home\/([^/]*)$/.test(s)){var r,a;e.cid="";let o=(null===(r=s.match(RegExp("\\/d2l\\/home\\/(?<id>[^/]*)$")))||void 0===r?void 0:null===(a=r.groups)||void 0===a?void 0:a.id)||"";e.cid=o,setTimeout(()=>{t((0,p.jsx)(e3,{brightSpace:e,Route:i,ClassId:o}))},100),n("Homepage - ClassRoom: ".concat(o)),console.log(s)}else e.cid="",t((0,p.jsx)(O,{brightSpace:e,Route:i})),n("Homepage - ClassList")};return(0,g.useEffect)(()=>{let e=new x;i(e)},[]),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(m(),{children:[(0,p.jsx)("title",{children:s}),(0,p.jsx)("meta",{name:"viewport",content:"initial-scale=1.0, width=device-width"}),(0,p.jsx)("link",{rel:"icon",type:"image/png",href:"/favicon.png"}),(0,p.jsx)("meta",{name:"description",content:"A Serverless React Based Chat Application Similar To Discord, Using Firebase."})]}),e]})};var e9=e4},8831:function(e){e.exports={container:"Aside_container__lnUA2",Active:"Aside_Active__towak"}},6447:function(e){e.exports={container:"ClassCard_container__3pBmA",content:"ClassCard_content__WjqZI",disabled:"ClassCard_disabled__nulrt"}},4379:function(e){e.exports={container:"ClassHeaderCard_container__WNnhP",content:"ClassHeaderCard_content__rzP_t"}},7220:function(e){e.exports={container:"NavBar_container__nHIRU",side:"NavBar_side__UhU23",center:"NavBar_center__tvQq9",rightSide:"NavBar_rightSide__kcq7D",SearchBar:"NavBar_SearchBar__z69Ye",Icon:"NavBar_Icon__Uafbb",IconButton:"NavBar_IconButton__fxpfM",alertArea:"NavBar_alertArea__5HPWm",NotificationShade:"NavBar_NotificationShade__OiVO0",dropDown:"NavBar_dropDown__NQimM",open:"NavBar_open__1xC0h",Active:"NavBar_Active__62_K8"}},9753:function(e){e.exports={container:"StreamCard_container__aPujl",titleBlock:"StreamCard_titleBlock__gvBIR",titleIcon:"StreamCard_titleIcon__pP_H9",DueDate:"StreamCard_DueDate__cg0D_",Unread:"StreamCard_Unread__ewkVS",titleText:"StreamCard_titleText__aXu63",expandContainer:"StreamCard_expandContainer__Qul7w",News:"StreamCard_News__WIV4d",Content:"StreamCard_Content__2y30t",Discussions:"StreamCard_Discussions__98Ph7",Assignments:"StreamCard_Assignments__1fB5b",Quizzes:"StreamCard_Quizzes__BSr4p"}},375:function(e){e.exports={contentMedia:"ContentBody_contentMedia__geP13",container:"ContentBody_container__Fv0F_"}},8484:function(e){e.exports={markDown:"NewsBody_markDown__uOq38"}},7480:function(e){e.exports={container:"StreamChip_container__8WIYo",News:"StreamChip_News__Zw5hk",Content:"StreamChip_Content__p5bGk",Discussions:"StreamChip_Discussions__jJsaF",Assignments:"StreamChip_Assignments__41YRT",Quizzes:"StreamChip_Quizzes__C7Plj"}},7747:function(e){e.exports={container:"ClassList_container__r0y9g",list:"ClassList_list__WONjD"}},2032:function(e){e.exports={container:"ClassRoom_container__CAjNI",content:"ClassRoom_content__Ze4kG",stream:"ClassRoom_stream__FxEdb",chipContainer:"ClassRoom_chipContainer__HFlVp"}},8541:function(e){e.exports={container:"Loader_container__51ck_",loader:"Loader_loader__i6zT_"}},4505:function(){},4160:function(){},6115:function(){},922:function(){},9728:function(){}},function(e){e.O(0,[859,459,774,888,179],function(){return e(e.s=7314)}),_N_E=e.O()}]);