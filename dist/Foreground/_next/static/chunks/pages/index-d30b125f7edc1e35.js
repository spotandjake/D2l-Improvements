(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{7314:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(865)}])},865:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return ed}});var n,s,i,o,r,c,l,d,h,u,p=a(2322),m=a(2784),x=a(7729),_=a.n(x);(n=c||(c={})).ep="ep",n.le="le",n.lp="lp",n.lr="lr",(s=l||(l={}))[s.Module=0]="Module",s[s.Topic=1]="Topic";var j=class{async _start(){let e=await this.versions();e.forEach(e=>{(e.ProductCode==c.ep||e.ProductCode==c.le||e.ProductCode==c.lp||e.ProductCode==c.lr)&&(this.version[e.ProductCode]=e.LatestVersion)}),this._getToken(!0),setInterval(()=>window.requestIdleCallback(()=>this._getToken(!0),{timeout:1e3}),3e5)}async _fetch(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.startsWith("/")&&(e="https://durham.elearningontario.ca/d2l".concat(e)),t.headers={"content-type":"application/x-www-form-urlencoded, application/json",...t.headers};let a=await fetch(e,t);return a.json()}async _getToken(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(e||""==this.token){let e=await this._fetch("/lp/auth/oauth2/token",{headers:{"x-csrf-token":localStorage.getItem("XSRF.Token")},body:"scope=*:*:*",method:"POST"});this.token=e.access_token}return this.token}async versions(){return await this._fetch("/api/versions/")}constructor(){this.version={ep:"1.0.0",le:"1.0.0",lp:"1.0.0",lr:"1.0.0"},this.cid="",this.token="",this.uid="",this.uid=localStorage.getItem("Session.UserId"),this._start()}},g=a(8541),f=a.n(g);let w=()=>(0,p.jsx)("section",{className:f().container,children:(0,p.jsx)("div",{className:f().loader,children:Array.from({length:9},(e,t)=>(0,p.jsx)("div",{},t))})});var v=a(7747),C=a.n(v),S=a(7220),N=a.n(S),y=a(4351),b=a(9300),k=a(2379),I=a(4882),T=a(3169),D=a(3754),B=a(1495),P=a(1292);(i=d||(d={})).Mail="Mail",i.Message="Message",i.Notification="Alert",i.Profile="Profile",i.Closed="Closed";let A=async e=>JSON.parse((await e.text()).trim().substr(9)),z=e=>{let{brightSpace:t}=e,[a,n]=(0,m.useState)(3e4),[s,i]=(0,m.useState)("Closed"),[o,r]=(0,m.useState)([]),[c,l]=(0,m.useState)((0,p.jsx)(w,{}));(0,m.useEffect)(()=>{let e;let t=async()=>{let n=await fetch("/d2l/activityFeed/checkForNewAlerts?isXhr=true&requestId=3&X-D2L-Session=no-keep-alive"),s=await A(n);if(Array.isArray(s.Payload)){let e=[];["Messages","Grades"].forEach(t=>{if(s.Payload.includes(t))switch(t){case"Messages":e.push("Mail");break;case"Grades":e.push("Alert");break;default:alert("Unknown Notification Type ".concat(t))}}),r(e)}else r([]);e=setTimeout(t,a)};return t(),()=>clearTimeout(e)},[]);let d=async e=>{if(s===e||"Closed"==e)i("Closed"),l((0,p.jsx)(w,{}));else{i(e);let a=["","Alert","Mail"].indexOf(e);if(-1!=a){let e=await fetch("/d2l/MiniBar/".concat(t.cid,"/ActivityFeed/GetAlertsDaylight?Category=").concat(a,"&requestId=3")),n=await A(e),i=new DOMParser,o=i.parseFromString(n.Payload.Html,"text/html");l((0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("h2",{children:s}),(0,p.jsx)("hr",{}),(0,p.jsx)("div",{children:(0,p.jsx)("div",{className:N().NotificationShade,dangerouslySetInnerHTML:{__html:o.querySelector(".vui-list").innerHTML}})})]}))}else"Profile"==e?l((0,p.jsxs)("ul",{className:N().dropDown,children:[(0,p.jsx)("li",{children:(0,p.jsx)("button",{onClick:()=>{localStorage.setItem("Extension-Disabled","true"),location.reload()},children:"Disable Extension"})}),(0,p.jsx)("li",{children:(0,p.jsx)("button",{children:"Profile"})}),(0,p.jsx)("li",{children:(0,p.jsx)("button",{children:"Settings"})}),(0,p.jsx)("li",{children:(0,p.jsx)("a",{href:"https://durham.elearningontario.ca/d2l/logout",children:"Log Out"})})]})):l((0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("h2",{children:s}),(0,p.jsx)("hr",{}),(0,p.jsx)("div",{children:(0,p.jsx)(w,{})})]}))}};return(0,p.jsxs)("nav",{className:N().container,children:[(0,p.jsx)(y.Z,{timeout:3e4,onActive:()=>n(3e4),onIdle:()=>n(3e5),debounce:250}),(0,p.jsx)("div",{className:"".concat(N().side," ").concat(N().leftSide),children:(0,p.jsx)(b.Z,{"aria-label":"aside",className:N().IconButton,children:(0,p.jsx)(k.Z,{className:N().Icon,component:I.Z,viewBox:"0 0 24 24"})})}),(0,p.jsx)("div",{className:N().center,children:(0,p.jsx)("input",{className:N().SearchBar,placeholder:"Search",type:"text"})}),(0,p.jsx)(P.Z,{onClickAway:()=>d("Closed"),children:(0,p.jsxs)("div",{className:"".concat(N().side," ").concat(N().rightSide),children:[(0,p.jsx)(b.Z,{"aria-label":"Mail",className:[N().IconButton,o.includes("Mail")?N().Active:""].join(" "),onClick:()=>d("Mail"),children:(0,p.jsx)(k.Z,{className:N().Icon,component:T.Z,viewBox:"0 0 24 24"})}),(0,p.jsx)(b.Z,{"aria-label":"Message",className:[N().IconButton,o.includes("Message")?N().Active:""].join(" "),onClick:()=>d("Message"),children:(0,p.jsx)(k.Z,{className:N().Icon,component:D.Z,viewBox:"0 0 24 24"})}),(0,p.jsx)(b.Z,{"aria-label":"Alerts",className:[N().IconButton,o.includes("Alert")?N().Active:""].join(" "),onClick:()=>d("Alert"),children:(0,p.jsx)(k.Z,{className:N().Icon,component:B.Z,viewBox:"0 0 24 24"})}),(0,p.jsx)(b.Z,{"aria-label":"Profile",className:N().IconButton,onClick:()=>d("Profile"),children:(0,p.jsx)("picture",{className:N().Icon,children:(0,p.jsx)("img",{src:"https://durham.elearningontario.ca/d2l/api/lp/1.32/profile/myProfile/image"})})}),(0,p.jsx)("div",{className:[N().alertArea,"Closed"==s?"":N().open].join(" "),children:c})]})})]})};var M=a(6447),E=a.n(M);let R=e=>{let{Title:t,Href:a,Active:n,children:s,Route:i}=e,o=(e,t,a)=>{a&&(i?(history.pushState({Title:e,Url:t},e,t),i()):window.location.href=t)};return(0,p.jsx)("div",{onClick:()=>{o(t,a,n)},children:s})},Z=e=>{let{Name:t,Active:a,Href:n,Picture:s,StartDate:i,Route:o}=e;return(0,p.jsx)("div",{className:[E().container,a?E().disabled:" "].join(" "),children:(0,p.jsxs)(R,{Title:t,Href:n,Active:!a,Route:o,children:[(0,p.jsx)("picture",{children:(0,p.jsx)("img",{src:s})}),(0,p.jsxs)("div",{className:E().content,children:[(0,p.jsx)("h4",{children:t}),a?(0,p.jsx)("h6",{children:"Closed"}):(0,p.jsxs)("h6",{children:["Closes | ",new Date(i).toDateString()]})]})]})})},F=e=>{let{brightSpace:t,Route:a}=e,[n,s]=(0,m.useState)((0,p.jsx)(p.Fragment,{}));return(0,m.useEffect)(()=>{(async()=>{let e=new Date().valueOf(),n=await t._fetch("https://bc59e98c-eabc-4d42-98e1-edfe93518966.enrollments.api.brightspace.com/users/".concat(t.uid,"?search=&pageSize=20&embedDepth=0&sort=current&parentOrganizations=&orgUnitTypeId=3&promotePins=true&autoPinCourses=false&roles=&excludeEnded=false&excludeIndirect=false"),{headers:{authorization:"Bearer ".concat(await t._getToken())}}),i=await Promise.all(n.entities.map(async n=>{let{href:s}=n,i=await t._fetch(s,{headers:{authorization:"Bearer ".concat(await t._getToken())}}),o=await t._fetch(i.links[1].href,{headers:{authorization:"Bearer ".concat(await t._getToken())}}),r=await window.fetch(o.entities[2].href).then(e=>e.json()).catch(async()=>await t._fetch(o.entities[2].href,{headers:{authorization:"Bearer ".concat(await t._getToken())}}).catch(()=>"https://blog.fluidui.com/content/images/2019/01/imageedit_1_9273372713.png")),{endDate:c,name:l,startDate:d}=o.properties;return(0,p.jsx)(Z,{Name:l,Active:new Date(c).valueOf()<e,Href:o.links[0].href.replace("https://bc59e98c-eabc-4d42-98e1-edfe93518966.folio.api.brightspace.com/organizations/","https://durham.elearningontario.ca/d2l/home/"),Picture:r.links?r.links[2].href:r,StartDate:d,Route:()=>a(t)})}));s((0,p.jsx)(p.Fragment,{children:i}))})()},[]),(0,p.jsxs)("section",{className:C().container,children:[(0,p.jsx)(z,{brightSpace:t}),(0,p.jsx)("section",{className:C().list,children:n})]})};var H=(0,m.memo)(F),O=a(2032),U=a.n(O);(o=h||(h={})).News="News",o.Content="Content",o.Discussions="Discussions",o.Assignments="Assignments",o.Quizzes="Quizzes",(r=u||(u={})).Complete="Complete",r.Unread="Unread",r.OverDue="DueDate";var L=a(4379),Q=a.n(L);let q=e=>{let{Name:t,Picture:a,StartDate:n}=e;return(0,p.jsxs)("header",{className:Q().container,children:[(0,p.jsx)("picture",{children:(0,p.jsx)("img",{src:a})}),(0,p.jsxs)("div",{className:Q().content,children:[(0,p.jsx)("h4",{children:t}),(0,p.jsxs)("h6",{children:["Closes | ",new Date(n).toDateString()]})]})]})};var V=a(9753),W=a.n(V),X=a(9213),G=a(3699),Y=a(8484),J=a.n(Y);let $=e=>{let{Content:t}=e;return(0,p.jsx)("div",{className:J().markDown,dangerouslySetInnerHTML:{__html:t.Html||t.Text}})};var K=a(375),ee=a.n(K);let et=e=>{let{Content:t}=e;switch(!0){case/docs\.google\.com/i.test(t):return(0,p.jsx)("iframe",{allow:"encrypted-media *;",width:"100%",scrolling:"no",src:t,children:"The File Is Having Issues Being Shown"});case/www\.youtube\.com/i.test(t):return(0,p.jsx)("object",{data:"https://www.youtube.com/embed/".concat(new URL(t).searchParams.get("v")),type:"application/pdf",width:"100%",height:"auto",children:(0,p.jsx)("embed",{src:"https://www.youtube.com/embed/".concat(new URL(t).searchParams.get("v")),type:"application/pdf"})});case/\.(doc|docm|docm|docx|docx|dotx|potx|ppt|pptm|pptm|pptx|xlw|xls|xlsm|xlsm|xlsx|xltx)/i.test(t):if(void 0==navigator.mimeTypes||(null==navigator?void 0:navigator.mimeTypes["application/x-nacl"])!==void 0&&[...(null==navigator?void 0:navigator.plugins)||[{filename:""}]].some(e=>{let{filename:t}=e;return"gbkeegbaiigmenfmjfclcdgdpimamgkj"==t}))return(0,p.jsx)("iframe",{allow:"encrypted-media *;",width:"100%",scrolling:"no",src:t,children:"The File Is Having Issues Being Shown"});return console.log("Office Viewer Unsupported"),console.log(t),(0,p.jsx)(w,{});case/\.(apng|avif|gif|jpg|jpeg|jfif|pjpeg|pjp|png|svg|webp)/i.test(t):return(0,p.jsx)("picture",{className:ee().contentMedia,children:(0,p.jsx)("img",{src:t})});case/\.(3gp|aac|flac|mpg|mpeg|mp3|mp4|m4a|m4v|m4p|oga|ogg|ogv|ogg|mov|wav|webm)/i.test(t):return(0,p.jsxs)("video",{className:ee().contentMedia,controls:!0,children:[(0,p.jsx)("source",{src:t}),"Your Browser Does Not Support The Video Type"]});case/\.(pdf)/i.test(t):return(0,p.jsx)("object",{data:t,type:"application/pdf",width:"100%",height:"auto",children:(0,p.jsx)("embed",{src:t,type:"application/pdf"})});case t.startsWith("/")&&/\.(html|htm)/i.test(t):return(0,p.jsx)("iframe",{allow:"encrypted-media *;",width:"100%",src:t,children:"The Page is having some trouble showing"});default:return console.log("rendering is not yet implemented for content at url: ".concat(t)),(0,p.jsx)(w,{})}},ea=e=>{let{Content:t}=e;return(0,p.jsx)("div",{className:ee().container,children:(0,p.jsx)(et,{Content:t})})},en=(e,t)=>{switch(e){case h.News:return(0,p.jsx)($,{Content:t});case h.Content:return(0,p.jsx)(ea,{Content:t});default:return console.log("Implement Viewing for Category: ".concat(e)),console.log(t),(0,p.jsx)(w,{})}},es=e=>{let{Id:t,Title:a,Progress:n,Category:s,StartDate:i,Content:o}=e,[r,c]=(0,m.useState)((0,p.jsx)(w,{})),[l,d]=(0,m.useState)(!1),u=()=>{l||(c(en(s,o)),d(!0))},x={[h.News]:X.Z,[h.Content]:G.Z}[s];return(0,p.jsxs)("label",{className:[W().container,W()[s]].join(" "),htmlFor:"".concat(t,"-ExpandState"),onClick:()=>u(),children:[(0,p.jsxs)("div",{className:W().titleBlock,children:[(0,p.jsx)("div",{className:[W().titleIcon,n].join(" "),children:(0,p.jsx)(k.Z,{className:W().Icon,component:x,viewBox:"0 0 24 24"})}),(0,p.jsxs)("div",{className:W().titleText,children:[(0,p.jsx)("h2",{children:a}),(0,p.jsx)("h5",{children:new Date(i).toDateString()})]})]}),(0,p.jsx)("input",{type:"checkbox",id:"".concat(t,"-ExpandState")}),(0,p.jsxs)("div",{className:W().expandContainer,children:[(0,p.jsx)("hr",{}),r]})]})};var ei=a(7480),eo=a.n(ei);let er=e=>{let{Type:t}=e;return(0,p.jsx)("label",{className:[eo().container,eo()[t]].join(" "),htmlFor:"".concat(t,"-ExpandState"),children:t})},ec=e=>{let{brightSpace:t,Route:a,ClassId:n}=e,[s,i]=(0,m.useState)(3e4),[o,r]=(0,m.useState)((0,p.jsx)(w,{})),[c,d]=(0,m.useState)((0,p.jsx)(w,{}));return(0,m.useEffect)(()=>{let e;let i=async()=>{let o=[],c=await t._fetch("/api/le/".concat(t.version.le,"/").concat(n,"/news/"));c.forEach(e=>{o.push({date:new Date(e.StartDate).getTime(),elm:(0,p.jsx)(es,{Id:e.Id,Title:e.Title,Progress:u.Complete,Category:h.News,StartDate:e.StartDate,Content:e.Body,Route:a},e.Id)})});let d=await t._fetch("/api/le/unstable/".concat(n,"/content/userprogress/?pageSize=99999")),m=async e=>{let a=[];return await Promise.all(e.map(async e=>{switch(e.Type){case l.Module:{let s=await t._fetch("/api/le/".concat(t.version.le,"/").concat(n,"/content/modules/").concat(e.Id,"/structure/"));a.push(...await m(s));break}case l.Topic:a.push({...e,Read:d.Objects.some(t=>t.ObjectId==e.Id&&t.IsRead)})}})),a},x=await t._fetch("/api/le/".concat(t.version.le,"/").concat(n,"/content/root/")),_=await m(x);for(let e of _)o.push({date:new Date(e.LastModifiedDate).getTime(),elm:(0,p.jsx)(es,{Id:e.Id,Title:e.Title,Progress:[u.Unread,u.Complete][e.Read?1:0],Category:h.Content,StartDate:e.LastModifiedDate,Content:e.Url,Route:a},e.Id)});r((0,p.jsx)(p.Fragment,{children:o.sort((e,t)=>t.date-e.date).map(e=>e.elm)})),e=setTimeout(i,s)};return(async()=>{let{properties:e,entities:a}=await t._fetch("https://bc59e98c-eabc-4d42-98e1-edfe93518966.organizations.api.brightspace.com/".concat(n),{headers:{authorization:"Bearer ".concat(await t._getToken())}}),s=await window.fetch(a[2].href).then(e=>e.json()).catch(async()=>await t._fetch(a[2].href,{headers:{authorization:"Bearer ".concat(await t._getToken())}}).catch(()=>"https://blog.fluidui.com/content/images/2019/01/imageedit_1_9273372713.png"));d((0,p.jsx)(q,{Name:e.name,Picture:s.links?s.links[2].href:s,StartDate:e.startDate})),i()})(),()=>clearTimeout(e)},[]),(0,p.jsxs)("section",{className:U().container,children:[(0,p.jsx)(y.Z,{timeout:3e4,onActive:()=>i(3e4),onIdle:()=>i(9e5),debounce:250}),(0,p.jsx)(z,{brightSpace:t}),(0,p.jsxs)("section",{className:U().content,children:[c,(0,p.jsxs)("section",{className:U().stream,children:[(0,p.jsx)("input",{type:"checkbox",id:"".concat(h.News,"-ExpandState"),defaultChecked:!0}),(0,p.jsx)("input",{type:"checkbox",id:"".concat(h.Content,"-ExpandState"),defaultChecked:!0}),(0,p.jsx)("input",{type:"checkbox",id:"".concat(h.Discussions,"-ExpandState"),defaultChecked:!0}),(0,p.jsx)("input",{type:"checkbox",id:"".concat(h.Assignments,"-ExpandState"),defaultChecked:!0}),(0,p.jsx)("input",{type:"checkbox",id:"".concat(h.Quizzes,"-ExpandState"),defaultChecked:!0}),(0,p.jsxs)("div",{className:U().chipContainer,children:[(0,p.jsx)(er,{Type:h.News}),(0,p.jsx)(er,{Type:h.Content}),(0,p.jsx)(er,{Type:h.Discussions}),(0,p.jsx)(er,{Type:h.Assignments}),(0,p.jsx)(er,{Type:h.Quizzes})]}),o]})]})]})},el=()=>{let[e,t]=(0,m.useState)((0,p.jsx)(w,{})),[a,n]=(0,m.useState)("Homepage - ClassList"),s=e=>{let a=window.location.pathname;if(!0===/\/d2l\/home\/([^/]*)$/.test(a)){var i,o;let r=(null===(i=a.match(RegExp("\\/d2l\\/home\\/(?<id>[^/]*)$")))||void 0===i?void 0:null===(o=i.groups)||void 0===o?void 0:o.id)||"";e.cid=r,t((0,p.jsx)(ec,{brightSpace:e,Route:s,ClassId:r})),n("Homepage - ClassRoom")}else e.cid="",t((0,p.jsx)(H,{brightSpace:e,Route:s})),console.log(window.location.pathname),n("Homepage - ClassList")};return(0,m.useEffect)(()=>{let e=new j;s(e)},[]),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(_(),{children:[(0,p.jsx)("title",{children:a}),(0,p.jsx)("meta",{name:"viewport",content:"initial-scale=1.0, width=device-width"}),(0,p.jsx)("link",{rel:"icon",type:"image/png",href:"/favicon.png"}),(0,p.jsx)("meta",{name:"description",content:"A Serverless React Based Chat Application Similar To Discord, Using Firebase."})]}),e]})};var ed=el},6447:function(e){e.exports={container:"ClassCard_container__3pBmA",content:"ClassCard_content__WjqZI",disabled:"ClassCard_disabled__nulrt"}},4379:function(e){e.exports={container:"ClassHeaderCard_container__WNnhP",content:"ClassHeaderCard_content__rzP_t"}},7220:function(e){e.exports={container:"NavBar_container__nHIRU",side:"NavBar_side__UhU23",center:"NavBar_center__tvQq9",rightSide:"NavBar_rightSide__kcq7D",SearchBar:"NavBar_SearchBar__z69Ye",Icon:"NavBar_Icon__Uafbb",IconButton:"NavBar_IconButton__fxpfM",alertArea:"NavBar_alertArea__5HPWm",NotificationShade:"NavBar_NotificationShade__OiVO0",dropDown:"NavBar_dropDown__NQimM",open:"NavBar_open__1xC0h",Active:"NavBar_Active__62_K8"}},9753:function(e){e.exports={container:"StreamCard_container__aPujl",titleBlock:"StreamCard_titleBlock__gvBIR",titleIcon:"StreamCard_titleIcon__pP_H9",DueDate:"StreamCard_DueDate__cg0D_",Unread:"StreamCard_Unread__ewkVS",titleText:"StreamCard_titleText__aXu63",expandContainer:"StreamCard_expandContainer__Qul7w",News:"StreamCard_News__WIV4d",Content:"StreamCard_Content__2y30t",Discussions:"StreamCard_Discussions__98Ph7",Assignments:"StreamCard_Assignments__1fB5b",Quizzes:"StreamCard_Quizzes__BSr4p"}},375:function(e){e.exports={contentMedia:"ContentBody_contentMedia__geP13",container:"ContentBody_container__Fv0F_"}},8484:function(e){e.exports={markDown:"NewsBody_markDown__uOq38"}},7480:function(e){e.exports={container:"StreamChip_container__8WIYo",News:"StreamChip_News__Zw5hk",Content:"StreamChip_Content__p5bGk",Discussions:"StreamChip_Discussions__jJsaF",Assignments:"StreamChip_Assignments__41YRT",Quizzes:"StreamChip_Quizzes__C7Plj"}},7747:function(e){e.exports={container:"ClassList_container__r0y9g",list:"ClassList_list__WONjD"}},2032:function(e){e.exports={container:"ClassRoom_container__CAjNI",content:"ClassRoom_content__Ze4kG",stream:"ClassRoom_stream__FxEdb",chipContainer:"ClassRoom_chipContainer__HFlVp"}},8541:function(e){e.exports={container:"Loader_container__51ck_",loader:"Loader_loader__i6zT_"}}},function(e){e.O(0,[869,774,888,179],function(){return e(e.s=7314)}),_N_E=e.O()}]);